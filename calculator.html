<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Presupuesto - Mantenimiento de Espacios Verdes</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ============================================
           CALCULADORA DE PRESUPUESTO - ESTILOS
           ============================================ */

        .calc-hero {
            background: linear-gradient(135deg, var(--dark-green) 0%, var(--black) 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            margin-top: 80px;
        }

        .calc-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--light-green);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .calc-hero p {
            font-size: 1.1rem;
            color: var(--text-gray);
        }

        .calc-main {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .calc-container {
            background: linear-gradient(135deg, rgba(37, 89, 35, 0.1), rgba(26, 64, 25, 0.1));
            border: 2px solid var(--primary-green);
            border-radius: 12px;
            padding: 50px;
            margin-bottom: 40px;
        }

        /* Secciones de selección */
        .calc-section {
            margin-bottom: 50px;
            padding-bottom: 50px;
            border-bottom: 2px solid rgba(157, 134, 67, 0.2);
        }

        .calc-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .calc-section-title {
            font-size: 1.4rem;
            color: var(--light-green);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .calc-section-icon {
            font-size: 1.8rem;
        }

        /* Opciones de selección */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .option-card {
            background: rgba(26, 64, 25, 0.5);
            border: 2px solid rgba(157, 134, 67, 0.3);
            border-radius: 8px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: space-between;
        }

        .option-card:hover {
            border-color: var(--light-green);
            background: rgba(37, 89, 35, 0.15);
            transform: translateY(-4px);
        }

        .option-card.selected {
            border-color: var(--light-green);
            background: linear-gradient(135deg, rgba(37, 89, 35, 0.25), rgba(26, 64, 25, 0.15));
            box-shadow: 0 0 20px rgba(157, 134, 67, 0.3);
        }

        .option-radio {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 24px;
            height: 24px;
            border: 2px solid var(--text-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            transition: all 0.3s ease;
        }

        .option-card.selected .option-radio {
            border-color: var(--light-green);
            background: var(--light-green);
            box-shadow: 0 0 15px rgba(157, 134, 67, 0.5);
        }

        .option-radio::after {
            content: '✓';
            color: var(--black);
            font-weight: bold;
            font-size: 1.2rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .option-card.selected .option-radio::after {
            opacity: 1;
        }

        .option-title {
            font-size: 1.2rem;
            color: white;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .option-description {
            color: var(--text-gray);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .option-price {
            font-size: 1.6rem;
            color: var(--light-green);
            font-weight: bold;
        }

        .option-price-label {
            font-size: 0.8rem;
            color: var(--text-gray);
            display: block;
            margin-top: 5px;
        }

        /* Slider para altura de pasto */
        .grass-slider-container {
            margin-top: 20px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: var(--text-gray);
        }

        .slider-value {
            background: var(--primary-green);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(157, 134, 67, 0.2);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--light-green);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(157, 134, 67, 0.5);
            border: 2px solid var(--primary-green);
        }

        .slider::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--light-green);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(157, 134, 67, 0.5);
            border: 2px solid var(--primary-green);
        }

        .slider-warning {
            background: rgba(157, 134, 67, 0.2);
            border-left: 4px solid var(--light-green);
            padding: 12px 15px;
            border-radius: 4px;
            margin-top: 15px;
            color: var(--text-gray);
            font-size: 0.9rem;
            display: none;
        }

        .slider-warning.active {
            display: block;
        }

        /* Resumen y resultado */
        .calc-result-box {
            background: linear-gradient(135deg, var(--dark-green) 0%, var(--black) 100%);
            border: 2px solid var(--light-green);
            border-radius: 12px;
            padding: 40px;
            margin-top: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .calc-result-box::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(157, 134, 67, 0.1), transparent);
            border-radius: 50%;
        }

        .calc-result-content {
            position: relative;
            z-index: 2;
        }

        .result-title {
            font-size: 1.3rem;
            color: var(--text-gray);
            margin-bottom: 20px;
        }

        .result-price {
            font-size: 3.5rem;
            color: var(--light-green);
            font-weight: bold;
            margin: 20px 0;
        }

        .result-price-label {
            font-size: 1.1rem;
            color: var(--text-gray);
            margin-bottom: 30px;
        }

        .result-details {
            background: rgba(37, 89, 35, 0.15);
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
            text-align: left;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(157, 134, 67, 0.2);
            color: var(--text-gray);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .detail-icon {
            font-size: 1.2rem;
            color: var(--light-green);
        }

        .detail-value {
            color: var(--light-green);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .result-cta {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .btn-calculate {
            background: linear-gradient(135deg, var(--primary-green), var(--light-green));
            color: white;
            border: none;
            padding: 16px 40px;
            border-radius: 6px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-calculate:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(37, 89, 35, 0.3);
        }

        .btn-reset {
            background: transparent;
            color: var(--light-green);
            border: 2px solid var(--light-green);
            padding: 14px 35px;
            border-radius: 6px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-reset:hover {
            background: rgba(157, 134, 67, 0.15);
            transform: scale(1.05);
        }

        .comparison-table {
            background: rgba(37, 89, 35, 0.15);
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
        }

        .comparison-title {
            font-size: 1.1rem;
            color: var(--light-green);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .comparison-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 20px;
            padding: 15px;
            border-bottom: 1px solid rgba(157, 134, 67, 0.2);
            align-items: center;
        }

        .comparison-row:last-child {
            border-bottom: none;
        }

        .comparison-row.header {
            font-weight: 600;
            color: var(--light-green);
            background: rgba(157, 134, 67, 0.1);
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .comparison-label {
            color: var(--text-gray);
        }

        .comparison-value {
            text-align: right;
            color: var(--light-green);
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .calc-hero h1 {
                font-size: 1.8rem;
            }

            .calc-container {
                padding: 30px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .calc-section-title {
                font-size: 1.2rem;
            }

            .result-price {
                font-size: 2.5rem;
            }

            .comparison-row {
                grid-template-columns: 1fr;
            }

            .comparison-row.header {
                display: none;
            }

            .comparison-row::before {
                content: attr(data-label);
                font-weight: 600;
                color: var(--light-green);
                display: block;
                margin-bottom: 8px;
            }

            .calc-main {
                padding: 30px 15px;
            }
        }

        @media (max-width: 480px) {
            .calc-hero h1 {
                font-size: 1.5rem;
            }

            .calc-container {
                padding: 20px;
            }

            .calc-section {
                margin-bottom: 30px;
                padding-bottom: 30px;
            }

            .calc-section-title {
                font-size: 1.1rem;
            }

            .option-card {
                padding: 20px;
            }

            .option-title {
                font-size: 1rem;
            }

            .option-price {
                font-size: 1.4rem;
            }

            .result-price {
                font-size: 2rem;
            }

            .detail-item {
                padding: 10px 0;
            }

            .result-cta {
                flex-direction: column;
            }

            .btn-calculate,
            .btn-reset {
                width: 100%;
                justify-content: center;
            }

            .calc-main {
                padding: 20px 10px;
            }
        }
    </style>
</head>

<body>
    <div include-html="header.html"></div>

    <!-- Calculator Hero -->
    <section class="calc-hero">
        <div class="container">
            <h1><i class="fas fa-calculator"></i> Calculadora de Presupuesto</h1>
            <p>Descubrí cuánto cuesta mantener tu jardín perfecto</p>
        </div>
    </section>

    <!-- Calculator Main -->
    <section class="calc-main">
        <div class="calc-container">

            <!-- SECTION 1: Frecuencia -->
            <div class="calc-section">
                <div class="calc-section-title">
                    <span class="calc-section-icon"><i class="fas fa-calendar-days"></i></span>
                    Paso 1: ¿Con qué frecuencia necesitás el servicio?
                </div>
                <div class="options-grid">
                    <div class="option-card" data-option="frequency" data-value="single">
                        <div class="option-radio"></div>
                        <div class="option-title"><i class="fas fa-calendar-check"></i> Visita Única</div>
                        <div class="option-description">Un corte en este fin de semana</div>
                        <div class="option-price">A partir de $27.500</div>
                    </div>
                    <div class="option-card" data-option="frequency" data-value="monthly">
                        <div class="option-radio"></div>
                        <div class="option-title"><i class="fas fa-calendar-alt"></i> Plan Mensual</div>
                        <div class="option-description">2 visitas durante el mes</div>
                        <div class="option-price">A partir de $50.000</div>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: Tipo de Servicio -->
            <div class="calc-section">
                <div class="calc-section-title">
                    <span class="calc-section-icon"><i class="fas fa-pruning-shears"></i></span>
                    Paso 2: ¿Qué tipo de servicio elegís?
                </div>
                <div class="options-grid">
                    <div class="option-card" data-option="service" data-value="cut-only">
                        <div class="option-radio"></div>
                        <div class="option-title"><i class="fas fa-cut"></i> Solo Corte</div>
                        <div class="option-description">Corte de pasto con máquina profesional</div>
                        <div class="option-price">Opción económica</div>
                    </div>
                    <div class="option-card" data-option="service" data-value="cut-trim">
                        <div class="option-radio"></div>
                        <div class="option-title"><i class="fas fa-broom"></i> Corte + Bordeado</div>
                        <div class="option-description">Corte completo + bordes perfectos</div>
                        <div class="option-price">Resultado profesional</div>
                    </div>
                </div>
            </div>

            <!-- SECTION 3: Altura del Pasto -->
            <div class="calc-section">
                <div class="calc-section-title">
                    <span class="calc-section-icon"><i class="fas fa-arrow-up"></i></span>
                    Paso 3: ¿Cuál es la altura de tu pasto?
                </div>
                <div class="grass-slider-container">
                    <div class="slider-label">
                        <span>Altura aproximada:</span>
                        <div class="slider-value"><span id="grassHeight">15</span> cm</div>
                    </div>
                    <input type="range" min="5" max="30" value="15" class="slider" id="grassSlider">
                    <div
                        style="margin-top: 10px; color: var(--text-gray); font-size: 0.9rem; display: flex; gap: 20px; justify-content: space-between;">
                        <span><i class="fas fa-water"></i> Bajo (5 cm)</span>
                        <span>Normal</span>
                        <span>Alto (30 cm) <i class="fas fa-exclamation"></i></span>
                    </div>
                    <div class="slider-warning" id="surchargeWarning">
                        <i class="fas fa-exclamation-triangle"></i> <strong>Atención:</strong> El pasto mide más de 20
                        cm. Se aplicará un recargo del 30% por mayor desgaste de máquinas.
                    </div>
                </div>
            </div>

        </div>

        <!-- RESULTADO -->
        <div class="calc-result-box">
            <div class="calc-result-content">
                <div class="result-title">Tu presupuesto estimado:</div>
                <div class="result-price" id="finalPrice">$27.500</div>
                <div class="result-price-label">Más impuestos si aplican</div>

                <!-- Detalles -->
                <div class="result-details">
                    <div class="detail-item">
                        <div class="detail-label">
                            <span class="detail-icon"><i class="fas fa-calendar-check"></i></span>
                            <span>Frecuencia</span>
                        </div>
                        <div class="detail-value" id="detailFrequency">Selecciona una opción</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">
                            <span class="detail-icon"><i class="fas fa-pruning-shears"></i></span>
                            <span>Servicio</span>
                        </div>
                        <div class="detail-value" id="detailService">Selecciona una opción</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">
                            <span class="detail-icon"><i class="fas fa-arrow-up"></i></span>
                            <span>Altura del pasto</span>
                        </div>
                        <div class="detail-value" id="detailHeight">15 cm</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">
                            <span class="detail-icon"><i class="fas fa-percentage"></i></span>
                            <span>Recargo por pasto alto</span>
                        </div>
                        <div class="detail-value" id="detailSurcharge">No aplica</div>
                    </div>
                </div>

                <!-- Tabla de comparación -->
                <div class="comparison-table">
                    <div class="comparison-title"><i class="fas fa-balance-scale"></i> Ahorro Mensual vs Visita Única
                    </div>
                    <div class="comparison-row header">
                        <div>Opción</div>
                        <div>Precio por visita</div>
                        <div>Total mes</div>
                    </div>
                    <div class="comparison-row" data-label="Visita Única">
                        <div class="comparison-label">Visita Única (sin plan)</div>
                        <div class="comparison-value" id="singlePrice">$27.500</div>
                        <div class="comparison-value" id="singleTotal">$55.000</div>
                    </div>
                    <div class="comparison-row" data-label="Plan Mensual">
                        <div class="comparison-label">Plan Mensual (2 visitas)</div>
                        <div class="comparison-value" id="planPrice">$25.000</div>
                        <div class="comparison-value" id="planTotal">$50.000</div>
                    </div>
                    <div class="comparison-row"
                        style="background: rgba(147, 191, 52, 0.2); border-radius: 4px; font-weight: 600;"
                        data-label="Tu ahorro">
                        <div class="comparison-label">Ahorro mensual con plan</div>
                        <div></div>
                        <div class="comparison-value" id="savings"
                            style="color: var(--light-green); font-size: 1.2rem;">$5.000</div>
                    </div>
                </div>

                <!-- CTAs -->
                <div class="result-cta">
                    <a id="whatsappBtn" href="https://wa.me/54911304893780" class="btn-calculate" target="_blank"
                        rel="noopener noreferrer">
                        Contratar por WhatsApp
                    </a>
                    <button class="btn-reset">
                        <i class="fas fa-redo"></i> Reiniciar Cálculo
                    </button>
                </div>
            </div>
        </div>

    </section>

    <div include-html="footer.html"></div>

    <script>
        // Variables de control
        let calculatorState = {
            frequency: null,
            service: null,
            grassHeight: 15,
            surcharge: 0
        };

        // Precios base
        const prices = {
            frequency: {
                single: { cutOnly: 27500, cutTrim: 34000 },
                monthly: { cutOnly: 50000, cutTrim: 60000 }
            }
        };

        // Event listeners para las tarjetas de opción
        document.querySelectorAll('.option-card').forEach(card => {
            card.addEventListener('click', function () {
                const option = this.dataset.option;
                const value = this.dataset.value;

                // Remover selección anterior del mismo grupo
                document.querySelectorAll(`[data-option="${option}"]`).forEach(c => {
                    c.classList.remove('selected');
                });

                // Agregar nueva selección
                this.classList.add('selected');
                calculatorState[option] = value;

                // Actualizar pantalla
                updateDisplay();
            });
        });

        // Slider de altura de pasto
        const grassSlider = document.getElementById('grassSlider');
        const grassHeight = document.getElementById('grassHeight');

        grassSlider.addEventListener('input', function () {
            calculatorState.grassHeight = parseInt(this.value);
            grassHeight.textContent = this.value;
            updateDisplay();
        });

        // Botón resetear
        document.querySelector('.btn-reset').addEventListener('click', function () {
            // Remover todas las selecciones
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Resetear estado
            calculatorState = {
                frequency: null,
                service: null,
                grassHeight: 15,
                surcharge: 0
            };

            // Resetear slider
            grassSlider.value = 15;
            grassHeight.textContent = 15;

            // Resetear pantalla
            updateDisplay();
        });

        // Función para actualizar el cálculo y la pantalla
        function updateDisplay() {
            // Calcular precio
            let basePrice = 0;
            let frequencyLabel = 'Selecciona una opción';
            let serviceLabel = 'Selecciona una opción';
            let surchargeLabel = 'No aplica';

            if (calculatorState.frequency && calculatorState.service) {
                basePrice = prices.frequency[calculatorState.frequency][calculatorState.service];

                // Etiquetas de frecuencia
                frequencyLabel = calculatorState.frequency === 'single' ? 'Visita Única' : 'Plan Mensual (2 visitas)';

                // Etiquetas de servicio
                serviceLabel = calculatorState.service === 'cut-only' ? 'Solo Corte' : 'Corte + Bordeado';

                // Calcular recargo por altura
                if (calculatorState.grassHeight > 20) {
                    calculatorState.surcharge = Math.round(basePrice * 0.30);
                    surchargeLabel = '+30% (' + formatPrice(calculatorState.surcharge) + ')';
                } else {
                    calculatorState.surcharge = 0;
                    surchargeLabel = 'No aplica';
                }
            }

            const finalPrice = basePrice + calculatorState.surcharge;

            // Actualizar detalles en pantalla
            document.getElementById('finalPrice').textContent = formatPrice(finalPrice);
            document.getElementById('detailFrequency').textContent = frequencyLabel;
            document.getElementById('detailService').textContent = serviceLabel;
            document.getElementById('detailHeight').textContent = calculatorState.grassHeight + ' cm';
            document.getElementById('detailSurcharge').textContent = surchargeLabel;

            // Advertencia de pasto alto
            const warningBox = document.getElementById('surchargeWarning');
            if (calculatorState.grassHeight > 20) {
                warningBox.classList.add('active');
            } else {
                warningBox.classList.remove('active');
            }

            // Actualizar tabla de comparación
            const singleServicePrice = calculatorState.service === 'cut-only' ? 27500 : 34000;
            const monthlyServicePrice = calculatorState.service === 'cut-only' ? 50000 : 60000;

            document.getElementById('singlePrice').textContent = formatPrice(singleServicePrice);
            document.getElementById('singleTotal').textContent = formatPrice(singleServicePrice * 2);
            document.getElementById('planPrice').textContent = formatPrice(Math.round(monthlyServicePrice / 2));
            document.getElementById('planTotal').textContent = formatPrice(monthlyServicePrice);

            const savings = (singleServicePrice * 2) - monthlyServicePrice;
            document.getElementById('savings').textContent = formatPrice(savings);

            // Actualizar enlace de WhatsApp con presupuesto
            updateWhatsappLink();
        }

        // Función para actualizar el enlace de WhatsApp con el presupuesto dinámico
        function updateWhatsappLink() {
            const whatsappBtn = document.getElementById('whatsappBtn');
            let message = 'Hola%21%20Quisiera%20contratar%20un%20servicio.%20Mi%20presupuesto%20es%20ARS%20' +
                (calculatorState.frequency && calculatorState.service ?
                    document.getElementById('finalPrice').textContent.replace('$', '').replace(/\./g, '') :
                    '0');

            if (calculatorState.frequency && calculatorState.service) {
                const freq = calculatorState.frequency === 'single' ? 'Visita%20Única' : 'Plan%20Mensual';
                const service = calculatorState.service === 'cut-only' ? 'Solo%20Corte' : 'Corte%20%2B%20Bordeado';
                message += '%0AOpción:%20' + freq + '%0AServicio:%20' + service + '%0AAltura%20del%20pasto:%20' +
                    calculatorState.grassHeight + '%20cm';
            }

            whatsappBtn.href = 'https://wa.me/54911304893780?text=' + message;
        }

        // Función para formatear precios
        function formatPrice(price) {
            return '$' + price.toLocaleString('es-AR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        }

        // Inicialización
        updateDisplay();
    </script>

    <script src="script.js"></script>
</body>

</html>